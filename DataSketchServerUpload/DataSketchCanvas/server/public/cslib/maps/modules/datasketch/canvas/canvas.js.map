{"version":3,"file":"../../../../modules/datasketch/canvas/canvas.js","sources":["modules/datasketch/canvas/canvas.coffee"],"names":[],"mappings":"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","sourcesContent":["define (require) ->\r\n  #Third party library\r\n  require       'thirdparty/base64'\r\n  Fabric        = require 'thirdparty/fabric'\r\n\r\n  #Local imports\r\n  View          = require './view'\r\n  Model         = require './model'  \r\n  Controller    = require 'core/controller/controller'\r\n  HM            = require 'core/event/hook_manager'\r\n  Globals       = require 'core/model/globals'\r\n  Path          = require './objects/path/object'\r\n  Group         = require './objects/group/object'\r\n  ObjectBase    = require './objects/base/object'   \r\n  ColorAction   = require 'modules/datasketch/actions/set_color'\r\n  StrokeAction  = require 'modules/datasketch/actions/set_stroke_width'\r\n  ObjectSummary = require 'modules/datasketch/menuitems/objectsummary'  \r\n  PropertyMap   = require 'modules/datasketch/animation/property_map'  \r\n\r\n  class DSCanvas extends Controller\r\n    ###*\r\n       * Funtion to initialize view and events on canvas.\r\n       * @param {config} model and view configuration.\r\n    ###\r\n    constructor : (config) ->\r\n      config ?= {}\r\n      config.modelClass ?= Model\r\n      config.viewClass ?= View      \r\n      super config\r\n\r\n      @_model.addEventListener 'Model.Change', @_onModelChange\r\n      @view().addEventListener 'Selection.Created', @_onSelectionCreated\r\n      @view().addEventListener 'Selection.Scaling', @_onSelectionScaling      \r\n      #@view().addEventListener 'Selection.Modified', @_onSelectionModified\r\n      @view().addEventListener 'Selection.Cleared', @_onSelectionCleared\r\n      @view().addEventListener 'Path.Created', @_onPathCreated\r\n    \r\n    #Global variable instance declaration.\r\n    root = exports ? this\r\n    \r\n    ###*\r\n       * Funtion for render path object on canvas.\r\n    ###\r\n    render: () =>\r\n      @_view.render @_model\r\n\r\n    ###*\r\n       * Funtion for render canvas.\r\n    ###\r\n    dryRender: () =>\r\n      @_view.dryRender()\r\n\r\n    ###*\r\n       * Funtion for set the scale of an object.\r\n       * @param {scaleX} scaleX of an object.\r\n       * @param {scaleY} scaleY of an object.\r\n    ###\r\n    setObjectScale: (scaleX, scaleY) =>\r\n      canvasActiveObject = this.getSelectedObjects()\r\n      canvasActiveObject[0].setScale\r\n        x: scaleX,\r\n        y: scaleY\r\n\r\n    ###*\r\n       * Funtion for manipulate the effect of animation on an object when calibration input slider value got changed.\r\n    ###\r\n    onChangeMinMaxSlider: () =>\r\n      if $('#maxValue').prop('checked') == true\r\n        Scale = eval($('#maxRangeInput').val())\r\n      else\r\n        Scale =   eval($('#minRangeInput').val())\r\n\r\n      if root.objectCalibrationProperty == \"Transparency\"\r\n        Scale = (Math.abs(Scale)/100)\r\n      else\r\n        Scale = (Math.abs(Scale))\r\n              \r\n      canvasActiveObject = this.getSelectedObjects()\r\n      activeObject = canvasActiveObject[0]._view._fabric\r\n      switch root.objectCalibrationProperty\r\n        when \"X\"            then  @_view.setObjectPosition Scale,activeObject.top\r\n        when \"Y\"            then  @_view.setObjectPosition activeObject.left,Scale\r\n        when \"Height\"       then  this.setObjectScale activeObject.scaleX,Scale\r\n        when \"Width\"        then  this.setObjectScale Scale,activeObject.scaleY\r\n        when \"Rotation\"     then  canvasActiveObject[0].setRotation Scale\r\n        when \"Scale\"        then  this.setObjectScale Scale,Scale\r\n        when \"Transparency\" then  canvasActiveObject[0].setOpacity Scale    \r\n      canvasActiveObject[0].enforceTransform()\r\n      \r\n      ObjectSummary objectSummary = new ObjectSummary        \r\n      objectSummary.ObjectProperty activeObject\r\n      this.dryRender()\r\n\r\n    ###*\r\n       * Funtion for remove animation property from an oject.\r\n    ###\r\n    removeProperty: () =>\r\n      @_view.deleteCurrentProperty()\r\n\r\n    ###*\r\n       * Funtion for set the position of an object.\r\n       * @param {left} left coord of an object.\r\n       * @param {top} top coord of an object.\r\n    ###\r\n    setActiveObjectPosition: (left,top) =>      \r\n      activeObject = this.getSelectedObjects()      \r\n      activeObject[0].setPosition\r\n        x:left,\r\n        y:top\r\n\r\n    ###*\r\n       * Funtion for overlay of an object.\r\n       * @param {operation} name of an overlay operation.\r\n    ###\r\n    overlayObject:(operation) =>\r\n      activeObjectsId = [];\r\n      if @_model._data.selected.length > 1\r\n          for obj in this._view._fabric._activeGroup._objects\r\n            activeObjectsId.push obj.id\r\n          @_view.removeSelectionOnSave()\r\n          for object in activeObjectsId\r\n            pathObj = @_model._data.objects.filter((data) => return(data._view._fabric.id == object))\r\n            @_view.overlayOfAnObject operation,pathObj[0]\r\n      else\r\n        @_view.overlayOfAnObject operation,@_model._data.selected[0]    \r\n    ###*\r\n       * Funtion for reset the property of an object which was modified during calibration and manipulation module open.\r\n    ###\r\n    applyOriginalProperty: () =>      \r\n      activeObject = this.getSelectedObjects()\r\n      minRangeInput =  $('#minRangeInput').val()\r\n      maxRangeInput =  $('#maxRangeInput').val()\r\n\r\n      if window.currentObjectId == root.LastActiveObject.id\r\n        if activeObject.length > 0\r\n          @_model._data.selected[0]._view._fabric.opacity = eval(root.currentActiveObject[\"Opacity\"])\r\n          @_model._data.selected[0]._view._fabric.angle = eval(root.currentActiveObject[\"Angle\"]) \r\n          activeObject[0].setRotation  eval(root.currentActiveObject[\"Angle\"])\r\n          if root.objectCalibrationProperty == \"X\" && window.currentActionId == \"calibrationApplyButton\"\r\n              this.setActiveObjectPosition eval(minRangeInput), root.currentActiveObject[\"Y\"]              \r\n          else if root.objectCalibrationProperty == \"Y\" && window.currentActionId == \"calibrationApplyButton\"\r\n              this.setActiveObjectPosition root.currentActiveObject[\"X\"], eval(minRangeInput)              \r\n          else\r\n            this.setActiveObjectPosition root.currentActiveObject[\"X\"], root.currentActiveObject[\"Y\"]\r\n\r\n          activeObject[0].setScale\r\n            x: root.currentActiveObject[\"scaleX\"],\r\n            y: root.currentActiveObject[\"scaleY\"]\r\n\r\n          activeObject[0].setOpacity root.currentActiveObject[\"Opacity\"]\r\n          activeObject[0].enforceTransform()\r\n          this.dryRender()  \r\n\r\n    ###*\r\n       * Funtion for storing object property before the visualization of animation on object.\r\n       * @param {activeObject} selected fabric object.\r\n    ###\r\n    storeObjectProperty: (activeObject) =>\r\n      root.currentActiveObject = {}\r\n      root.currentActiveObject[\"X\"]      = activeObject.left\r\n      root.currentActiveObject[\"Y\"]      = activeObject.top\r\n      root.currentActiveObject[\"Height\"] = activeObject.height\r\n      root.currentActiveObject[\"scaleY\"] = activeObject.scaleY\r\n      root.currentActiveObject[\"Width\"]  = activeObject.width\r\n      root.currentActiveObject[\"scaleX\"] = activeObject.scaleX\r\n      root.currentActiveObject[\"Angle\"]  = activeObject.angle\r\n      root.currentActiveObject[\"Opacity\"]= activeObject.opacity\r\n      window.currentObjectId             = activeObject.id\r\n\r\n    ###*\r\n       * Funtion for management of data and calibration module of an object.\r\n       * @param {object} selected object property from an object property menu.\r\n    ###\r\n    objectPropertyMenu: (object) =>\r\n      if $('.activeMenu').length > 0\r\n        @_objectProperty = HM.invoke 'DataMapping.ObjectProperties', []\r\n        @_dataProperty = HM.invoke 'DataMapping.DataProperties', []      \r\n        window.objectPropertyMaximum =  $('#maxRangeInput').val()\r\n        window.objectPropertyMinimum =  $('#minRangeInput').val()\r\n        @_dataProperty = @_dataProperty.filter((data)=>return data.getId() == $('#csvProperty').val())\r\n        ObjectProperty = @_objectProperty.filter((data)=>return data.getId() == $('.activeMenu')[0].id)\r\n        if @_dataProperty? && window.objectProperty[0]._model._data.id != \"stamping\"\r\n          calibration= {}\r\n          if window.objectProperty[0]._model._data.id == \"transparency\"\r\n            calibration.max = eval(window.objectPropertyMaximum / 100)\r\n            calibration.min = eval(window.objectPropertyMinimum / 100)\r\n          else\r\n            calibration.max = window.objectPropertyMaximum\r\n            calibration.min = window.objectPropertyMinimum\r\n          window.objectProperty = @_objectProperty\r\n          window.dataProperty = @_dataProperty\r\n          window.calibration = calibration\r\n          @_map = new PropertyMap\r\n            objectProperty: ObjectProperty[0]\r\n            dataProperty: @_dataProperty[0]\r\n            calibration: calibration\r\n          this.getSelectedObjects()[0].addPropertyMapping @_map\r\n        else\r\n          this.getSelectedObjects()[0]._model._data.isStamping = $('#isStamp')[0].checked      \r\n\r\n      activeObject = this.getSelectedFabric()\r\n\r\n      if window.currentObjectId == activeObject.id\r\n        if  !($(\"#CalibrationAndManipulationModal\").data('bs.modal') || {}).isShown       \r\n          this.storeObjectProperty activeObject\r\n        else            \r\n          window.currentObjectId = activeObject.id\r\n          this.applyOriginalProperty()\r\n      else     \r\n        this.storeObjectProperty activeObject\r\n\r\n      $('.objectproperty-menu .menu-item').removeClass('activeMenu')\r\n      $('#'+object.toLowerCase()+'.menu-item').addClass('activeMenu')\r\n\r\n      if ($(\"#CalibrationAndManipulationModal\").data('bs.modal') || {}).isShown  \r\n        this.applyOriginalProperty()         \r\n        this.dryRender()       \r\n\r\n      $('#maxRangeInput, #minRangeInput').val(0)\r\n      $('#maxInput, #minInput').html(0)\r\n      $('#shape')[0].style.pointerEvents = 'none'\r\n\r\n      window.objectProperty = @_view.getObjectProperty object\r\n      root.objectCalibrationProperty = object\r\n      this.bindPropertyDropdown(object)\r\n      rangeInput = $('#minRangeInput,#maxRangeInput')\r\n\r\n      switch object\r\n        when \"X\"          \r\n          rangeInput.attr('max', $(window).width())\r\n          this.setMinMaxBoth activeObject.left\r\n        when \"Y\"           \r\n          rangeInput.attr('max', $(window).height())\r\n          this.setMinMaxBoth activeObject.top\r\n        when \"Rotation\"          \r\n          rangeInput.attr('max', 360)\r\n          if activeObject.angle >= 0\r\n            this.setMinMaxBoth activeObject.angle\r\n          else\r\n            this.setMinMaxBoth 360+Math.round(activeObject.angle)            \r\n        when \"Scale\"\r\n          this.setCommonSliderValue(\"Scale\")\r\n          if activeObject.scaleX == activeObject.scaleY\r\n            this.setMinMaxBothFloat activeObject.scaleY             \r\n        when \"Height\"\r\n          this.setCommonSliderValue(\"Height\")\r\n          this.setMinMaxBothFloat activeObject.scaleY\r\n        when \"Width\"\r\n          this.setCommonSliderValue(\"Width\")\r\n          this.setMinMaxBothFloat activeObject.scaleX          \r\n        when \"Transparency\"\r\n          rangeInput.val(0)\r\n          $('#minInput,#maxInput').html(0)\r\n          rangeInput.attr('max', 100)\r\n          this.setMinMaxBoth (activeObject.opacity * 100)    \r\n        when \"Stamping\"\r\n            $('#isStamp')[0].checked = this.getSelectedObjects()[0]._model._data.isStamping\r\n\r\n      @_view.getAvailableProperty(object.toLowerCase())  \r\n      dataStore = Globals.get 'DataStore'      \r\n      for obj in dataStore._data.properties\r\n        if obj._data.id == $('#csvProperty').val()\r\n          minMax = dataStore.getMinMax obj\r\n          $('#propertyMaxValue').html(minMax.max)\r\n          $('#propertyMinValue').html(minMax.min)\r\n          break\r\n\r\n    ###*\r\n       * Function for set the object property value to the slider input of calibration module.\r\n       * @param {value} active object property value.\r\n    ###\r\n    setMinMaxBoth: (value) => \r\n      value = parseInt(value)\r\n      $('#minRangeInput,#maxRangeInput').val(value)\r\n      $('#minInput,#maxInput').html(value)\r\n      $('#minRangeInput,#maxRangeInput').attr('step', 1)\r\n\r\n     setMinMaxBothFloat: (value)=>\r\n       value = eval(value)\r\n       $('#minRangeInput,#maxRangeInput').val(value)\r\n       $('#minInput,#maxInput').html(value.toFixed(1))\r\n\r\n    ###*\r\n       * Function for reset the value of an slider in calibration module.\r\n    ###\r\n    setCommonSliderValue: (propertyName) =>\r\n      $('#minRangeInput,#maxRangeInput').val(0)\r\n      $('#minInput,#maxInput').html(0)\r\n      #$('#maxInput').html(0)\r\n      #$('#minRangeInput').val(0)\r\n      if(propertyName == \"Width\" || propertyName == \"Height\")\r\n        $('#minRangeInput,#maxRangeInput').attr('step', 0.1)\r\n      else\r\n        $('#minRangeInput,#maxRangeInput').attr('step', 1)\r\n\r\n      if(propertyName == \"Width\")\r\n        $('#minRangeInput,#maxRangeInput').attr('max', parseInt(window.innerWidth/100))\r\n      else\r\n        $('#minRangeInput,#maxRangeInput').attr('max', parseInt(window.innerHeight/100))\r\n\r\n    ###*\r\n       * Function binding dropdown menu of csv property and color property\r\n       * @param {menu} object property menu property.\r\n    ###\r\n    bindPropertyDropdown: (menu) =>      \r\n      #Clear CSV property dropdown menu  \r\n      $('#csvProperty,#csvPropertyColor').html(\"\")      \r\n\r\n      #get CSV property menu items\r\n      CsvProperty = Globals.get 'DataStore'\r\n\r\n      $('#manipulationandcalibrationproperty').hide()\r\n      $('#manipulationandcalibrationpropertystamping').hide()\r\n      $('#calibrationandmanipulationcolor').hide()\r\n      #Condition for checking click of an color property.  \r\n      if menu == \"Color\"\r\n        for obj in CsvProperty._data.properties\r\n          $('#csvPropertyColor').append(\"<option value=\"+obj._data.id+\">\"+obj._data.id+\"</option>\")        \r\n        $('#calibrationandmanipulationcolor').show()\r\n      else if menu == \"Stamping\"\r\n        #For all properties except color and rotation properties of an object.\r\n        $('#manipulationandcalibrationpropertystamping').show()        \r\n        $('#generateAction').click();\r\n      else \r\n        #For all properties except color and rotation properties of an object.\r\n        for obj in CsvProperty._data.properties\r\n          $('#csvProperty').append(\"<option value=\"+obj._data.id+\">\"+obj._data.id+\"</option>\")\r\n        $('#manipulationandcalibrationproperty').show()        \r\n        $('#generateAction').click();\r\n\r\n      $('#CalibrationAndManipulationModal').modal('show')\r\n      $('.modal-backdrop').hide();\r\n\r\n    ###*\r\n       * Function for save canvas and check the file is exist or not in database.\r\n       * @param {@FileName} file name.\r\n    ###\r\n    saveCanvas: (@FileName) =>      \r\n      $('#DisableBackground').show()      \r\n      $('#pageLoader').show()   \r\n      arrObject = []\r\n      if this._view._fabric._objects.length > 0\r\n        for obj in this._view._fabric._objects\r\n          if !obj.fill || obj.fill == 'undefined'\r\n            obj.fill = null\r\n\r\n        objList = this._view._fabric._objects\r\n        objList = JSON.parse(JSON.stringify(objList));\r\n        objList = objList.filter((item) => return item.newId != 'grid')\r\n\r\n        arrObject.push window.csvName\r\n        arrObject.push '{\"objects\":'+JSON.stringify(objList)+'}'\r\n\r\n        for item in @_model._data.objects\r\n          item._model._data._canvas = null\r\n          if item._model._data.propertyMappings.length > 0\r\n            for object in item._model._data.propertyMappings\r\n              object._canvas = null\r\n              arrObject.push item._model._data\r\n\r\n        apiData = { \r\n                    filename: @FileName\r\n                    filecontent: JSON.stringify(arrObject)\r\n                    UserId: window.currentUserId\r\n                  }\r\n                  \r\n        $('#DisableBackground').show()\r\n        #For download the saved file if user enable the download checkbox.\r\n        if ($(\"#chkIsDownload\").prop('checked'))\r\n          this.downloadCSVFile arrObject\r\n\r\n        #Check whether the file with same name exist or not.\r\n        $.post window.APIURL + 'CheckFile', apiData, (data) ->          \r\n          $('#DisableBackground').hide()\r\n          $('#pageLoader').hide()\r\n          if data == \"True\"                           \r\n            alert \"Sketch saved successfully.\"\r\n          else if confirm \"File already exist are you sure you want to rewrite it\"\r\n            $('#DisableBackground').show()\r\n            $('#pageLoader').show()\r\n            $.post window.APIURL + 'Save', apiData, (data) ->\r\n              $('#DisableBackground').hide()\r\n              $('#pageLoader').hide()\r\n              alert \"Sketch saved successfully.\"\r\n      else\r\n        alert \"Sketch cannot be blank\"   \r\n\r\n    ###*\r\n       * Function for saving canvas  to local storage.\r\n       * @param {callback} callback function.\r\n    ###\r\n    saveCanvasToLocal: (callback) =>\r\n      arrObject = []\r\n      if this._view._fabric._objects.length > 0\r\n        for obj in this._view._fabric._objects\r\n          if !obj.fill || obj.fill == 'undefined'\r\n            obj.fill = null\r\n\r\n        objList = this._view._fabric._objects\r\n        objList = JSON.parse(JSON.stringify(objList));\r\n        objList = objList.filter((item) => return item.newId != 'grid')\r\n\r\n        arrObject.push window.csvName\r\n        arrObject.push '{\"objects\":'+JSON.stringify(objList)+'}'\r\n\r\n        for item in @_model._data.objects\r\n          item._model._data._canvas = null\r\n          if item._model._data.propertyMappings.length > 0\r\n            for object in item._model._data.propertyMappings\r\n              object._canvas = null\r\n              arrObject.push item._model._data\r\n\r\n        localStorage.setItem('SaveCanvasToLocal',JSON.stringify(arrObject));\r\n        \r\n      callback();         \r\n\r\n    ###*\r\n       * Function for download the canvas file.\r\n       * @param {arrObject} content of canvas.\r\n    ###\r\n    downloadCSVFile: (arrObject) =>\r\n      objJsonB64 = Base64.encode(JSON.stringify(arrObject))\r\n      a = $(\"<a>\").attr(\"href\", \"data:application/octet-stream;charset=utf-16le;base64,\"+objJsonB64).attr(\"download\", @FileName+\".txt\").appendTo(\"body\");\r\n      a[0].click();\r\n      a.remove();        \r\n\r\n    ###*\r\n       * Function for change the origin of an object.\r\n       * @param {originX} origin selected value.\r\n       * @param {originY} origin selected value.\r\n    ###\r\n    updateObjectOrigin: (originX,originY,isMultiObject) =>        \r\n      activeObj = null;\r\n      activeObjectsId = [];\r\n      if isMultiObject\r\n        for obj in this._view._fabric._activeGroup._objects\r\n            activeObjectsId.push obj.id\r\n        @_view.removeSelectionOnSave()\r\n        for object in activeObjectsId\r\n           pathObj = @_model._data.objects.filter((data) => return(data._view._fabric.id == object))\r\n           point = pathObj[0]._view._fabric.getPointByOrigin obj.originX,obj.originY            \r\n           newPoint = pathObj[0]._view._fabric.translateToGivenOrigin point,obj.originX,obj.originY,originX,originY\r\n           pathObj[0]._view._fabric.originX = originX\r\n           pathObj[0]._view._fabric.originY = originY\r\n           pathObj[0].setPosition\r\n             x: newPoint.x,\r\n             y: newPoint.y\r\n      else\r\n          if this._view._fabric._activeGroup\r\n            for obj in this._view._fabric._objects\r\n              point = obj.getPointByOrigin obj.originX,obj.originY            \r\n              newPoint = obj.translateToGivenOrigin point,obj.originX,obj.originY,originX,originY\r\n              obj.originX = originX\r\n              obj.originY = originY\r\n              @_view.setObjectPosition newPoint.x,newPoint.y\r\n            activeObj = this._view._fabric._activeGroup            \r\n          else if this._view._fabric._activeObject\r\n            activeObj = this._view._fabric._activeObject\r\n            point = activeObj.getPointByOrigin activeObj.originX,activeObj.originY          \r\n            newPoint = activeObj.translateToGivenOrigin point,activeObj.originX,activeObj.originY,originX,originY  \r\n            activeObj.originX = originX\r\n            activeObj.originY = originY\r\n            @_view.setObjectPosition newPoint.x,newPoint.y          \r\n          ObjectSummary objectSummary = new ObjectSummary\r\n          objectSummary.ObjectProperty activeObj      \r\n          this.dryRender()\r\n    \r\n    ###*\r\n       * Function for show and hide the save canvas modal.\r\n    ###\r\n    saveObject: () =>\r\n      _this = this;\r\n      @_view.removeSelectionOnSave()  \r\n      if parent.getCurrentUserId() > 0\r\n         $('#SaveCanvasModal').modal('show');\r\n      else      \r\n         _this.saveCanvasToLocal _this.reloadCurrentPage                  \r\n\r\n    reloadCurrentPage: () =>\r\n      if window.location.host.includes(\"localhost\")\r\n        window.parent.open(\"http://localhost/DataSketch.Web/Account/Login?returnUrl=DataSketch/Index\",\"_self\");\r\n      else\r\n        window.parent.open(\"http://180.211.103.172:8070/Account/Login?returnUrl=DataSketch/Index\",\"_self\");        \r\n\r\n    ###*\r\n       * Function for creating the new file or reset canvas.\r\n    ###\r\n    createNewFile: () =>\r\n      #Clear Canvas\r\n      @_model.set 'objects', []\r\n\r\n    ###*\r\n       * Function for load the sketch from database.\r\n       * @param {UserId} id of an user.\r\n       * @param {FileName} the name of sketch.\r\n    ###\r\n    loadFromQueryString: (UserId,FileName) =>\r\n      if @_model._data.objects.length == 0\r\n        this.getSketchFromDbQueryString parseInt(UserId),FileName\r\n      else\r\n        while @_model._data.objects.length > 0           \r\n          @_model.removeObjects @_model._data.objects, false\r\n          @_model.removeObject  @_model._data.objects, false\r\n        this.getSketchFromDbQueryString parseInt(UserId),FileName\r\n    \r\n    ###*\r\n       * Function for load the sketch from database.\r\n       * @param {UserId} id of an user.\r\n       * @param {FileName} the name of sketch.\r\n    ###\r\n    getSketchFromDbQueryString:(UserId,FileName)=>      \r\n      view=@_view\r\n      model=@_model\r\n      _this=this\r\n      if @_model._data.objects.length==0 && UserId != NaN && FileName != ''\r\n        $.get window.APIURL + 'GetSketch?UserId='+UserId+'&SketchName='+FileName, (data) -> \r\n          try\r\n            if data.indexOf('<html') > 0\r\n              if window.location.host.includes(\"localhost\")\r\n                window.parent.open(\"http://localhost/DataSketch.Web/Account/Login?returnUrl=DataSketch/Index\",\"_self\");\r\n              else\r\n                window.parent.open(\"http://180.211.103.172:8070/Account/Login?returnUrl=DataSketch/Index\",\"_self\");  \r\n            else\r\n              view.loadFromJson data\r\n              $('.tool.snapgrid-1').removeClass(\"active\")\r\n              $('#DisableBackground').hide()\r\n              $('#pageLoader').hide()\r\n              if model && model._data.objects.length > 0\r\n                _this.disableControls()\r\n                window.isViewMode = 1\r\n          catch e\r\n            if window.location.host.includes(\"localhost\")\r\n              window.parent.open(\"http://localhost/DataSketch.Web/Account/Login?returnUrl=DataSketch/Index\",\"_self\");\r\n            else\r\n              window.parent.open(\"http://180.211.103.172:8070/Account/Login?returnUrl=DataSketch/Index\",\"_self\");\r\n\r\n    ###*\r\n       * Function for load the sketch from database.\r\n       * @param {FileName} name of sketch.\r\n    ###\r\n    loadFromDb: (FileName) =>\r\n      if @_model._data.objects.length == 0\r\n        this.getSketchFromDb window.currentUserId, FileName\r\n      else\r\n        while @_model._data.objects.length > 0           \r\n          @_model.removeObjects @_model._data.objects, false\r\n          @_model.removeObject  @_model._data.objects, false\r\n        this.getSketchFromDb window.currentUserId, FileName\r\n    \r\n    ###*\r\n       * Function for load the sketch from database.\r\n       * @param {UserId} id of an user.\r\n       * @param {FileName} the name of sketch.\r\n    ###\r\n    getSketchFromDb:(userId, FileName)=>\r\n      view=@_view\r\n      if @_model._data.objects.length==0\r\n        $.get window.APIURL + 'GetSketch?UserId='+userId+'&SketchName='+FileName, (data) -> \r\n          view.loadFromJson data\r\n          $('.tool.snapgrid-1').removeClass(\"active\")\r\n          $('#DisableBackground').hide()\r\n          $('#pageLoader').hide()\r\n          if @_model\r\n            if @_model._data.objects.length>0\r\n              $('.tool.SaveCanvas').show()\r\n\r\n    ###*\r\n       * Function for load the sketch from file data.\r\n       * @param {FileData} canvas data.\r\n    ###\r\n    loadFromFile: (FileData) =>      \r\n      if @_model._data.objects.length==0\r\n        this.getSketchFromFile FileData\r\n      else                            \r\n        while @_model._data.objects.length > 0           \r\n          @_model.removeObject @_model._data.objects[0], false\r\n          if @_model._data.objects.length == 0             \r\n            this.getSketchFromFile FileData\r\n            break\r\n\r\n    ###*\r\n       * Function for load the sketch from file data.\r\n       * @param {FileData} canvas data.\r\n    ###\r\n    getSketchFromFile: (FileData) =>\r\n      @_view.loadFromJson FileData\r\n      $('.tool.snapgrid-1').removeClass(\"active\")\r\n      $('#DisableBackground').hide()\r\n      $('#pageLoader').hide()\r\n\r\n      if @_model\r\n        if @_model._data.objects.length > 0\r\n          $('.tool.SaveCanvas').show()\r\n\r\n    ###*\r\n       * Function for show the load modal.\r\n    ###\r\n    showLoadModal: () =>\r\n      @_view.removeSelectionOnSave()\r\n      $('#DisableBackground').show()\r\n      $('#pageLoader').show()\r\n      @_view.bindSketchList()\r\n\r\n    ###*\r\n       * Function for get the path object from canvas.\r\n       * @return {list} list of path objects.\r\n    ###\r\n    getObjects: () =>\r\n      @_model.get 'objects'\r\n\r\n    ###*\r\n       * Function for get the path object from canvas.\r\n       * @return {list} list of path objects.\r\n    ###\r\n    getMode: () =>\r\n      @_model.get 'mode'\r\n\r\n    ###*\r\n       * Function for set the mode of canvas.\r\n    ###\r\n    setMode: (mode) =>\r\n      @_model.set 'mode', mode\r\n\r\n    ###*\r\n       * Function for get the stroke width of an active object.\r\n       * @return {number} stroke width of an object.\r\n    ###\r\n    getStrokeWidth: () =>\r\n      @_model.get 'strokeWidth'\r\n\r\n    ###*\r\n       * Function for set the stroke width of an active object.\r\n    ###\r\n    setStrokeWidth: (width) =>\r\n      if @_model.get 'selected'\r\n         for obj in @_model.get 'selected'\r\n            obj.setStrokeWidth width\r\n      @_model.set 'strokeWidth', width\r\n\r\n    ###*\r\n       * Function for get the stroke color of an active object.\r\n       * @return {string} color code of an stroke.\r\n    ###\r\n    getStrokeColor: () => \r\n      @_model.get 'strokeColor'\r\n\r\n    ###*\r\n       * Function for update the stroke color of an active object.\r\n       * @param {color} color code for an stroke.\r\n    ###\r\n    setStrokeColor: (color) =>      \r\n      if @_model.get 'selected'\r\n        for obj in @_model.get 'selected'\r\n          obj.setStrokeColor color        \r\n        this.dryRender()\r\n          \r\n      if color[0].id == \"color-fill\"\r\n        @_model.set 'fillColor', color[1]\r\n      else\r\n        @_model.set 'strokeColor', color[1]      \r\n\r\n    ###*\r\n       * Function for getting active group or objects on canvas.\r\n       * @return {object} active object on canvas.\r\n    ###\r\n    getSelectedObjects: () =>      \r\n      @_model.get 'selected'\r\n\r\n    ###*\r\n       * Function  for getting active group or objects fabric class object.\r\n       * @return {object} active object fabric on canvas.\r\n    ###\r\n    getSelectedFabric: () =>\r\n      this.getSelectedObjects()[0].view().getFabric()\r\n\r\n    ###*\r\n       * Function  for set the object active.\r\n       * @param {objects} list of object.\r\n    ###\r\n    selectObjects: (objects) =>\r\n      objectIds = (obj.getId() for obj in objects)          \r\n      @_model.set 'selected', (obj for obj in @_model.getActiveObjects() when obj.getId() in objectIds)\r\n\r\n    ###*\r\n       * Function  for adding object to canvas\r\n       * @param {object} fabric object.\r\n    ###\r\n    addObject: (object, silent = false) =>\r\n      @_model.addObject object, silent\r\n\r\n    ###*\r\n       * Function  for adding objects to canvas\r\n       * @param {objects} fabric object list.\r\n    ###\r\n    addObjects: (objects) =>\r\n      @_model.addObjects objects      \r\n      this.addObject(objects)\r\n      #this.render()\r\n\r\n    ###*\r\n       * Function  for adding objects to canvas in stamping mode.\r\n       * @param {object} path object.\r\n    ###\r\n    addStampingObjects:(object) =>\r\n      #@_model.addObjects objects\r\n      this.addObject(object)      \r\n\r\n    ###*\r\n       * Function for adding the custom shape to canvas.\r\n       * @param {shapeId} custom shape id.\r\n    ###\r\n    addShape: (shapeId) =>\r\n      @_view.addShape shapeId\r\n    \r\n    ###*\r\n       * Function for changing the grid size on canvas.\r\n       * @param {@value} grid size.\r\n    ###\r\n    manageGrid: (@value) =>\r\n      @_view.changeGridSize @value\r\n      gridSize = parseInt(@value)\r\n      window.gridSize = gridSize\r\n      if gridSize > 0\r\n        window.gridActive = true\r\n        obj = new ObjectBase\r\n        obj.onclickofcanvas 1, gridSize\r\n        window.gridSize = gridSize\r\n      else\r\n        window.gridActive = false\r\n        this.removeGrid()\r\n\r\n    ###*\r\n       * Function for adding grid to canvas and enable the grid mode.\r\n    ###\r\n    snapToGrid: () =>\r\n      obj = new ObjectBase\r\n      obj.onclickofcanvas 1\r\n      @_view.addGrid()\r\n    \r\n    ###*\r\n       * Function for remove grid to canvas and disable the grid mode.\r\n    ###\r\n    removeGrid: () =>      \r\n      obj = new ObjectBase\r\n      obj.onclickofcanvas 0\r\n      @_view.removeGrid()\r\n\r\n    #Global variable for checking whether isolation mode is on or not.\r\n    window.IsolationMode = false\r\n\r\n    ###*\r\n       * Function for delete the object from canvas.\r\n       * @param {object} path object.\r\n    ###    \r\n    deleteObject: (object) =>      \r\n      if window.IsolationMode == false\r\n        if object.length > 0\r\n          if confirm\"Are you sure you want to delete it?\"\r\n            @_model.removeObject object\r\n            @_model.removeObjects object\r\n      else\r\n        alert \"Please exit isolation mode for performing delete operation on object.\"\r\n      \r\n    ###*\r\n       * Function for delete the object from canvas.\r\n       * @param {object} path object.\r\n    ###\r\n    removeObject: (object) =>      \r\n      @_model.removeObject object\r\n\r\n    ###*\r\n       * Function for delete the objects from canvas.\r\n       * @param {object} path object.\r\n    ###\r\n    removeObjects: (objects) =>\r\n      @_model.removeObjects objects\r\n\r\n    ###*\r\n       * Function for delete the active object from canvas.\r\n    ###\r\n    removeSelected: () =>\r\n      @_model.removeSelected()\r\n\r\n    ###*\r\n       * Function for creating group of object from canvas.\r\n       * @param {objects} list of an objects.\r\n    ###\r\n    createGroup: (objects) =>\r\n      @_view.clearSelection()\r\n      if !objects?\r\n        objects = @_model.get 'selected'\r\n      if !objects?\r\n        return null\r\n\r\n      for obj in objects\r\n        obj.extractTransform()\r\n\r\n      groupObjects = objects\r\n      this.removeObjects objects      \r\n      group = Group.createFromObjects groupObjects\r\n      this.addObject group\r\n      \r\n      group\r\n\r\n    ###*\r\n       * Function for break the active group from canvas.\r\n       * @param {group} group object.\r\n    ###\r\n    breakGroup: (group) =>\r\n      objects = group.break()\r\n      this.removeObject group\r\n      for obj in objects\r\n        this.addObject obj\r\n        obj.enforceTransform()\r\n        obj.enableControls()\r\n      this.render()\r\n      group.getObjects()\r\n\r\n    ###*\r\n       * Function for enable and disable the isolate mode of an active group.\r\n       * @param {group} group object.\r\n    ###\r\n    isolate: (group) =>\r\n      if group\r\n        document.getElementById('shape').style.pointerEvents = 'none'\r\n        window.IsolationMode = true\r\n      else\r\n        document.getElementById('shape').style.pointerEvents = 'auto'\r\n        window.IsolationMode = false \r\n      @_model.isolate group\r\n      this.render()\r\n\r\n    ###*\r\n       * Function for enforce the transform of an active object. \r\n    ###\r\n    enforceTransform:()=>\r\n      Path path = new Path()\r\n      path.enforceTransform()\r\n\r\n    ###*\r\n       * Function for getting the isolation of an active group.\r\n       * @return {string} isolation mode.\r\n    ###\r\n    getIsolation: () =>\r\n      @_model.get 'isolated'\r\n\r\n    ###*\r\n       * Function for set the isolation of an group object.\r\n       * @param {isolation} boolean value.\r\n    ###\r\n    setIsolation: (isolation) =>\r\n      @_model.set 'isolated', isolation\r\n\r\n    ###*\r\n       * Function got executed when the mode got change on the canvas.\r\n       * @param {evt} event object.\r\n    ###\r\n    _onModelChange: (evt) =>     \r\n      switch evt.data.path\r\n        when \"strokeWidth\"\r\n          @dispatchEvent \"Canvas.StrokeWidthChange\",\r\n            width: evt.data.value\r\n        when \"mode\"\r\n          @dispatchEvent \"Canvas.ModeChange\",\r\n            mode: evt.data.value\r\n            last: evt.data.old\r\n        when \"strokeColor\"\r\n          @dispatchEvent \"Canvas.StrokeColorChange\",\r\n            color: evt.data.value\r\n        when \"fillColor\"\r\n          @dispatchEvent \"Canvas.FillColorChange\",\r\n            color: evt.data.value\r\n        when \"isolated\",\"selected\"\r\n          @_manageContextMenu()\r\n        when \"objects\"\r\n          this.render()\r\n\r\n    ###*\r\n       * Function for manage context menu according to the type of an selected object.\r\n    ###\r\n    _manageContextMenu: () =>\r\n      Globals.get('Relay').dispatchEvent 'ContextMenu.ContextChange',\r\n        context:\r\n          selection: @_model.get('selected')\r\n          isolation: @_model.get('isolated')\r\n\r\n    ###*\r\n       * Function got executed when the on path created event got triggered.\r\n       * @param {evt} event object.\r\n    ###\r\n    _onPathCreated: (evt) =>\r\n      path = Path.createFromFabric evt.data.path\r\n      @_model.addObject path, true\r\n\r\n    #_onObjectScaled: (e) =>      \r\n\r\n    ###*\r\n       * Function got executed when the on selection event got triggered.\r\n       * @param {evt} event object.\r\n    ###\r\n    _onSelectionCreated : (evt) =>\r\n      if(@_model.getActiveObjects().length > 1)\r\n         $('#stamping').hide()\r\n\r\n      if ($(\"#CalibrationAndManipulationModal\").data('bs.modal') || {}).isShown  #Condition for checking property modal is open or not.\r\n        $('#manipulationandcalibrationproperty').hide()       \r\n      \r\n      this.selectObjects (obj for obj in @_model.getActiveObjects() when obj.getId() in evt.data.objectIds)\r\n\r\n      #mechanism for updating the value of color picker and stroke width on selection of an object.\r\n      currentTarget = if evt.currentTarget._fabric._activeObject then evt.currentTarget._fabric._activeObject else evt.currentTarget._fabric.relatedTarget\r\n      root.LastActiveObject = currentTarget\r\n\r\n      if evt.data.objectIds.length == 1 && (currentTarget.type == \"line\" || currentTarget.type != \"group\")\r\n        if $('#Stroke').length > 0 && $('#Fill').length > 0\r\n          color = []\r\n          color.push \"id\":'color-stroke'\r\n          color.push currentTarget.stroke\r\n          colorAction = new ColorAction this, color, 'color-stroke'\r\n          colorAction.execute()\r\n          color = currentTarget.stroke          \r\n          $('#Stroke').next()[0].jscolor.fromString(color);\r\n          strokeaction = new StrokeAction this,currentTarget.strokeWidth\r\n          strokeaction.execute()\r\n          \r\n          if currentTarget.fill\r\n            color = []            \r\n            color.push \"id\":'color-fill'\r\n            color.push currentTarget.fill            \r\n            colorAction = new ColorAction this, color, 'color-fill'\r\n            colorAction.execute()\r\n            color = currentTarget.fill\r\n            $('#Fill').next()[0].jscolor.fromString(color);\r\n      window.activeObjectsId = [];\r\n      if @_model._data.selected.length > 1\r\n          for obj in this._view._fabric._activeGroup._objects\r\n            window.activeObjectsId.push obj.id\r\n      this.objectSummaryUpdate evt #Method for updating properties of an object on bottom right side of context menu.\r\n\r\n    ###*\r\n       * Function got executed when any object property got modified.\r\n       * @param {evt} event object.\r\n    ###\r\n    _onSelectionScaling: (evt) =>  \r\n      if ($(\"#CalibrationAndManipulationModal\").data('bs.modal') || {}).isShown \r\n        activeObject = evt.currentTarget._fabric._activeObject          \r\n        switch root.objectCalibrationProperty\r\n          when \"X\"\r\n            this.setMinMax activeObject.left\r\n          when \"Y\"\r\n            this.setMinMax activeObject.top\r\n          when \"Height\" \r\n            this.setMinMax activeObject.scaleY\r\n          when \"Width\"\r\n            this.setMinMax activeObject.scaleX\r\n          when \"Rotation\"\r\n            this.setMinMax activeObject.angle\r\n      this.objectSummaryUpdate evt     \r\n\r\n    ###*\r\n       * Function for set the range of input slider in calibration module.\r\n       * @param {value} max property value.\r\n    ###\r\n    setMinMax: (value) =>\r\n      switch root.objectCalibrationProperty\r\n        when \"X\",\"Y\",\"Rotation\"\r\n          if ($('#minValue').prop('checked'))\r\n            $('#minRangeInput').val(value)\r\n            $('#minInput').html(parseInt(value))\r\n          else\r\n            $('#maxRangeInput').val(value)\r\n            $('#maxInput').html(parseInt(value))      \r\n        when \"Height\",\"Width\"\r\n          if ($('#minValue').prop('checked'))\r\n            $('#minRangeInput').val(value)\r\n            $('#minInput').html(value.toFixed(1))\r\n          else\r\n            $('#maxRangeInput').val(value)\r\n            $('#maxInput').html(value.toFixed(1))      \r\n\r\n    ###*\r\n       * Function got executed when on selection event got triggered.\r\n       * @param {evt} event object.\r\n    ###\r\n    _onSelectionCleared: (evt) =>\r\n      if ($(\"#CalibrationAndManipulationModal\").data('bs.modal') || {}).isShown \r\n        this.applyOriginalProperty()\r\n      @selectObjects []\r\n      $('#ObjectProperties').hide() \r\n      $('.menu-item.parent').hide()\r\n      #hide the properties above canvas of an active object      \r\n      $('#CalibrationAndManipulationModal').modal('hide')       \r\n\r\n    ###*\r\n       * Function for intializing the canvas.\r\n    ###\r\n    initCanvas: () =>\r\n      @_view.initCanvas @_model\r\n\r\n    ###*\r\n       * Function for disable the model.\r\n    ###\r\n    disable: () =>\r\n      @_model.disable()\r\n\r\n    ###*\r\n       * Function for enable the model.\r\n    ###\r\n    enable: () =>\r\n      @_model.enable()\r\n\r\n    ###*\r\n       * Function for diable the controls.\r\n    ###\r\n    disableControls: () =>\r\n      @_model.disableControls()\r\n\r\n    ###*\r\n       * Function for enable the controls.\r\n    ###\r\n    enableControls: () =>\r\n      @_model.enableControls()\r\n\r\n    ###*\r\n       * Function for showing the object property on bottom right.\r\n       * @param {evt} event object.\r\n    ###\r\n    objectSummaryUpdate: (evt) =>\r\n      #mechanism for showing properties above canvas on selection of object on canvas.\r\n      activeObject = evt.currentTarget._fabric._activeObject\r\n      if activeObject\r\n        ObjectSummary objectSummary = new ObjectSummary\r\n        objectSummary.ObjectProperty activeObject"]}