{"version":3,"file":"../../../../../../../lib/modules/datasketch/canvas/objects/group/view.js","sources":["lib/modules/datasketch/canvas/objects/group/view.coffee"],"names":[],"mappings":"AAAA;AAAA,MAAA;;;;EAAA,MAAA,CAAO,SAAC,OAAD;AACL,QAAA;IAAA,gBAAA,GAAmB,OAAA,CAAQ,6CAAR;IACnB,MAAA,GAAS,OAAA,CAAQ,mBAAR;WAEH;;;MACS,mBAAC,KAAD;;QACX,2CAAM,KAAN;MADW;;0BAGb,WAAA,GAAa,SAAC,KAAD;AACX,YAAA;QAAA,GAAA,GAAM,IAAC,CAAA;QACP,MAAA,GAAS,IAAI,MAAM,CAAC;QAEpB,MAAM,CAAC,OAAP,GAAiB;QACjB,MAAM,CAAC,OAAP,GAAiB;QACjB,MAAA,GAAS;QACT,IAAA,GACE;UAAA,IAAA,EAAM,IAAN;UACA,KAAA,EAAO,IADP;UAEA,GAAA,EAAK,IAFL;UAGA,MAAA,EAAQ,IAHR;;AAKF;AAAA,aAAA,qCAAA;;UACE,CAAA,GAAI,GAAG,CAAC,SAAJ,CAAA;UACJ,EAAA,GAAK,CAAC,CAAC,eAAF,CAAA;UACL,IAAI,CAAC,IAAL,GAAe,iBAAH,GAAmB,IAAI,CAAC,GAAL,CAAS,EAAE,CAAC,IAAZ,EAAkB,IAAI,CAAC,IAAvB,CAAnB,GAAqD,EAAE,CAAC;UACpE,IAAI,CAAC,KAAL,GAAgB,kBAAH,GAAoB,IAAI,CAAC,GAAL,CAAS,EAAE,CAAC,IAAH,GAAU,EAAE,CAAC,KAAtB,EAA6B,IAAI,CAAC,KAAlC,CAApB,GAAkE,EAAE,CAAC,IAAH,GAAU,EAAE,CAAC;UAC5F,IAAI,CAAC,GAAL,GAAc,gBAAH,GAAkB,IAAI,CAAC,GAAL,CAAS,EAAE,CAAC,GAAZ,EAAiB,IAAI,CAAC,GAAtB,CAAlB,GAAkD,EAAE,CAAC;UAChE,IAAI,CAAC,MAAL,GAAiB,mBAAH,GAAqB,IAAI,CAAC,GAAL,CAAS,EAAE,CAAC,GAAH,GAAS,EAAE,CAAC,MAArB,EAA6B,IAAI,CAAC,MAAlC,CAArB,GAAoE,EAAE,CAAC,GAAH,GAAS,EAAE,CAAC;UAC9F,MAAM,CAAC,aAAP,CAAqB,CAArB;UACA,IAAc,gBAAd;YAAA,CAAC,CAAC,MAAF,CAAA,EAAA;;AARF;QASA,IAAI,cAAJ;UACE,MAAA,GACE;YAAA,CAAA,EAAG,CAAC,IAAI,CAAC,IAAL,GAAY,IAAI,CAAC,KAAlB,CAAA,GAA2B,CAA9B;YACA,CAAA,EAAG,CAAC,IAAI,CAAC,GAAL,GAAW,IAAI,CAAC,MAAjB,CAAA,GAA2B,CAD9B;YAFJ;;AAIA;AAAA,aAAA,wCAAA;;UACE,GAAG,CAAC,SAAJ,CAAA,CAAe,CAAC,SAAhB,CAAA;AADF;QAEA,MAAM,CAAC,GAAP,CAAW,IAAX,EAAiB,KAAK,CAAC,GAAN,CAAU,IAAV,CAAjB;QAEA,IAAC,CAAA,SAAD,CAAW,MAAX,EAAmB,KAAnB;eACA,IAAC,CAAA,aAAD,CAAe,8BAAf,EACE;UAAA,MAAA,EAAQ,MAAR;UACA,UAAA,EAAY,GADZ;SADF;MA/BW;;;;OAJS;EAJnB,CAAP;AAAA","sourcesContent":["define (require) ->\n  CanvasObjectView = require 'modules/datasketch/canvas/objects/base/view'\n  Fabric = require 'thirdparty/fabric'\n\n  class GroupView extends CanvasObjectView\n    constructor: (model) ->\n      super model\n\n    buildFabric: (model) =>\n      old = @_fabric\n      fabric = new Fabric.Group\n\n      fabric.originX = \"center\"\n      fabric.originY = \"center\"\n      center = null\n      dims =\n        left: null\n        right: null\n        top: null\n        bottom: null\n\n      for obj in model.get 'children'\n        v = obj.getFabric()\n        bb = v.getBoundingRect()\n        dims.left = if dims.left? then Math.min(bb.left, dims.left) else bb.left\n        dims.right = if dims.right? then Math.max(bb.left + bb.width, dims.right) else bb.left + bb.width\n        dims.top = if dims.top? then Math.min(bb.top, dims.top) else bb.top\n        dims.bottom = if dims.bottom? then Math.max(bb.top + bb.height, dims.bottom) else bb.top + bb.height\n        fabric.addWithUpdate v\n        v.remove() if v.canvas?\n      if !center?\n        center =\n          x: (dims.left + dims.right) / 2\n          y: (dims.top + dims.bottom) / 2\n      for obj in model.get 'children'\n        obj.getFabric().setCoords()\n      fabric.set 'id', model.get('id')\n\n      @setFabric fabric, model\n      @dispatchEvent \"CanvasObject.FabricGenerated\",\n        fabric: fabric\n        old_fabric: old\n"]}