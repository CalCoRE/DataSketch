{"version":3,"file":"../../../../../lib/modules/datasketch/contextmenu/module.js","sources":["lib/modules/datasketch/contextmenu/module.coffee"],"names":[],"mappings":"AAAA;AAAA,MAAA;;;;EAAA,MAAA,CAAO,SAAC,OAAD;AACL,QAAA;IAAA,MAAA,GAAS,OAAA,CAAQ,iBAAR;IACT,kBAAA,GAAqB,OAAA,CAAQ,WAAR;IACrB,EAAA,GAAK,OAAA,CAAQ,yBAAR;IACL,IAAA,GAAO,OAAA,CAAQ,mBAAR;IACP,OAAA,GAAU,OAAA,CAAQ,oBAAR;WAEJ;;;MACS,2BAAA;;;;;;;QACX,oDAAA,SAAA;MADW;;kCAGb,IAAA,GAAM,SAAA;QACJ,IAAC,CAAA,QAAD,GAAY,IAAI;QAChB,OAAO,CAAC,GAAR,CAAY,UAAZ,CAAuB,CAAC,QAAxB,CAAiC,IAAC,CAAA,QAAQ,CAAC,IAAV,CAAA,CAAjC;QACA,OAAO,CAAC,GAAR,CAAY,OAAZ,CAAoB,CAAC,gBAArB,CAAsC,4BAAtC,EAAoE,IAAC,CAAA,iBAArE;QACA,OAAO,CAAC,GAAR,CAAY,OAAZ,CAAoB,CAAC,gBAArB,CAAsC,0BAAtC,EAAkE,IAAC,CAAA,eAAnE;QACA,OAAO,CAAC,GAAR,CAAY,OAAZ,CAAoB,CAAC,gBAArB,CAAsC,2BAAtC,EAAmE,IAAC,CAAA,gBAApE;QACA,OAAO,CAAC,GAAR,CAAY,OAAZ,CAAoB,CAAC,gBAArB,CAAsC,4BAAtC,EAAoE,IAAC,CAAA,iBAArE;QACA,OAAO,CAAC,GAAR,CAAY,eAAZ,CAA4B,CAAC,gBAA7B,CAA8C,2BAA9C,EAA2E,IAAC,CAAA,SAA5E;eACA,OAAO,CAAC,GAAR,CAAY,eAAZ,CAA4B,CAAC,gBAA7B,CAA8C,4BAA9C,EAA4E,IAAC,CAAA,SAA7E;MARI;;kCAUN,gBAAA,GAAkB,SAAC,GAAD;QAChB,IAAC,CAAA,eAAD,GAAmB,GAAG,CAAC,IAAI,CAAC;eAC5B,IAAC,CAAA,UAAD,CAAA;MAFgB;;kCAIlB,iBAAA,GAAmB,SAAC,GAAD;QACjB,IAAC,CAAA,eAAD,GAAmB,GAAG,CAAC,IAAI,CAAC;eAC5B,IAAC,CAAA,UAAD,CAAA;MAFiB;;kCAInB,eAAA,GAAiB,SAAC,GAAD;QACf,IAAC,CAAA,eAAD,GAAmB;eACnB,IAAC,CAAA,QAAQ,CAAC,KAAV,CAAA;MAFe;;kCAIjB,SAAA,GAAW,SAAC,GAAD,GAAA;;kCAGX,UAAA,GAAY,SAAA;AACV,YAAA;QAAA,IAAG,4BAAH;UACE,KAAA,GAAQ,EAAE,CAAC,MAAH,CAAU,uBAAV,EAAmC,EAAnC,EACN;YAAA,OAAA,EAAS,IAAC,CAAA,eAAV;WADM;UAGR,IAAG,KAAK,CAAC,MAAT;mBACE,IAAC,CAAA,QAAQ,CAAC,OAAV,CAAkB,IAAI,CAAC,UAAL,CAChB;cAAA,KAAA,EAAO,KAAP;aADgB,CAAlB,EADF;WAAA,MAAA;mBAIE,IAAC,CAAA,QAAQ,CAAC,KAAV,CAAA,EAJF;WAJF;SAAA,MAAA;iBAUE,IAAC,CAAA,QAAQ,CAAC,KAAV,CAAA,EAVF;;MADU;;;;OA7BkB;EAP3B,CAAP;AAAA","sourcesContent":["define (require) ->\n  Module = require 'core/app/module'\n  ContextMenuManager = require './manager'\n  HM = require 'core/event/hook_manager'\n  Menu = require 'modules/menu/menu'\n  Globals = require 'core/model/globals'\n\n  class ContextMenuModule extends Module\n    constructor: () ->\n      super\n\n    init: () =>\n      @_manager = new ContextMenuManager\n      Globals.get('App.view').addChild @_manager.view()\n      Globals.get('Relay').addEventListener 'ContextMenu.RequestDisplay', @_onDisplayRequest\n      Globals.get('Relay').addEventListener 'ContextMenu.RequestClose', @_onCloseRequest\n      Globals.get('Relay').addEventListener 'ContextMenu.ContextChange', @_onContextChange\n      Globals.get('Relay').addEventListener 'ContextMenu.RefreshRequest', @_onRefreshRequest\n      Globals.get('ActionHistory').addEventListener 'ActionHistory.ActionAdded', @_onAction\n      Globals.get('ActionHistory').addEventListener 'ActionHistory.ActionUndone', @_onAction\n\n    _onContextChange: (evt) =>\n      @_currentContext = evt.data.context\n      @_buildMenu()\n\n    _onDisplayRequest: (evt) =>\n      @_currentContext = evt.data.context\n      @_buildMenu()\n\n    _onCloseRequest: (evt) =>\n      @_currentContext = null\n      @_manager.close()\n\n    _onAction: (evt) =>\n      ##@_buildMenu()\n\n    _buildMenu: () =>\n      if @_currentContext?\n        items = HM.invoke \"ContextMenu.MenuItems\", [],\n          context: @_currentContext\n\n        if items.length\n          @_manager.display Menu.createMenu\n            items: items\n        else\n          @_manager.close()\n      else\n        @_manager.close()"]}