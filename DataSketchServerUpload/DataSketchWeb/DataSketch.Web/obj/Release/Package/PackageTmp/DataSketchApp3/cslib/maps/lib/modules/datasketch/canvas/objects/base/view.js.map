{"version":3,"file":"../../../../../../../lib/modules/datasketch/canvas/objects/base/view.js","sources":["lib/modules/datasketch/canvas/objects/base/view.coffee"],"names":[],"mappings":"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","sourcesContent":["define (require) ->\n  View = require 'core/view/view'\n\n  class CanvasObjectView extends View\n    constructor: (model) ->\n      super()\n\n      model.addEventListener 'Model.Change', @_onChange\n\n    _onChange: (evt) =>\n      switch evt.data.path\n        when \"rotation\"\n          @_fabric?.set 'angle', evt.data.value\n        when \"scale\"\n          @_fabric?.set 'scaleX', evt.data.value.x\n          @_fabric?.set 'scaleY', evt.data.value.y\n        when \"position\"\n          @_fabric?.set 'left', evt.data.value.x\n          @_fabric?.set 'top', evt.data.value.y\n        when \"controllable\"\n          @_fabric?.hasControls = evt.data.value\n          @_fabric?.hasBorders = evt.data.value\n          if @_fabric.id != \"grid\"  \n             @_fabric?.selectable = evt.data.value\n          @_fabric.setCoords()\n        when \"disabled\"\n          @_fabric.opacity = if evt.data.value then 0.25 else 1\n        when \"opacity\"\n          @_fabric?.set 'opacity', evt.data.value\n\n    buildFabric: () =>\n\n    getFabric: () =>\n      @_fabric\n\n    setFabric: (fabric, model) =>\n      @_fabric = fabric\n      @_fabric.set 'left', model.get 'position.x'\n      @_fabric.set 'top', model.get 'position.y'\n      @_fabric.set 'angle', model.get 'rotation'\n      @_fabric.set 'scaleX', model.get 'scale.x'\n      @_fabric.set 'scaleY', model.get 'scale.y'\n      @_fabric.on \"rotating\", @_onRotating\n      @_fabric.on \"scaling\", @_onScaling\n      @_fabric.on \"moving\", @_onMoving\n\n    enforceTransform: (model) =>\n      @_fabric?.left = model.get('position.x')\n      @_fabric?.top = model.get('position.y')\n      @_fabric?.angle = model.get('rotation')\n      @_fabric?.scaleX = model.get('scale.x')\n      @_fabric?.scaleY = model.get('scale.y')\n      @_fabric.setCoords()\n\n    extractTransform: () =>\n      transform =\n        position:\n          x: @_fabric.left\n          y: @_fabric.top\n        rotation: @_fabric.angle\n        scale:\n          x: @_fabric.scaleX\n          y: @_fabric.scaleY\n\n    _onRotating: (e) =>\n      @dispatchEvent 'CanvasObject.Rotating',\n        rotation: @_fabric.angle\n\n    _onScaling: (e) =>\n      @dispatchEvent 'CanvasObject.Scaling',\n        scale:\n          x: @_fabric.scaleX\n          y: @_fabric.scaleY\n        position:\n          x: @_fabric.left\n          y: @_fabric.top\n\n    _onMoving: (e) =>\n      @dispatchEvent 'CanvasObject.Moving',\n        position:\n          x: @_fabric.left\n          y: @_fabric.top\n"]}