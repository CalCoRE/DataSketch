{"version":3,"file":"../../../../../modules/datasketch/tools/loadfile/tool.js","sources":["modules/datasketch/tools/loadfile/tool.coffee"],"names":[],"mappings":"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","sourcesContent":["define (require) ->\r\n  Tool = require 'modules/toolkit/tool/tool'\r\n  Globals = require 'core/model/globals'\r\n  View = require './view'\r\n  require 'link!./style.css'\r\n\r\n  #Include action files for performing different operations.\r\n  LoadFromDb = require 'modules/datasketch/actions/load_from_db'\r\n  LoadFromFile = require 'modules/datasketch/actions/load_from_file'\r\n\r\n  class LoadFileTool extends Tool    \r\n    constructor: () ->\r\n      super        \r\n        viewClass: View\r\n\r\n    generateAction: () =>\r\n      #Condition for checking which radio button is active on load modal.\r\n      if window.currentActionId == \"rbtnDB\"\r\n        $('#FormatValidationMessage').hide() \r\n        $('#ddlLoadValidationMessage').hide()\r\n        $('#LoadValidationMessage').hide()\r\n        $('#FileList').prop('disabled',false)\r\n        $('#fileUpload').prop('disabled',true)\r\n      else if window.currentActionId == \"rbtnFile\"\r\n        $('#LoadValidationMessage').hide()\r\n        $('#ddlLoadValidationMessage').hide()\r\n        $('#FileList').prop('disabled',true)\r\n        $('#fileUpload').prop('disabled',false)\r\n      \r\n      #Event got triggered when \"LoadFileModal\" got open.\r\n      $('#LoadFileModal').on 'shown.bs.modal',(e) =>\r\n        $('#rbtnFile').prop('checked',true)\r\n        $('#FileList').prop('disabled',true)\r\n        $('#fileUpload').prop('disabled',false)\r\n        e.stopImmediatePropagation()\r\n\r\n      #Event got triggered when \"LoadFileModal\" got close.\r\n      $('#LoadFileModal').on 'hidden.bs.modal',(e) =>\r\n        $('#fmLoad')[0].reset();\r\n        $('.modal-backdrop').hide();        \r\n        $('#LoadValidationMessage').hide()\r\n        $('#ddlLoadValidationMessage').hide()\r\n        $('#rbtnFile').prop('checked',true)\r\n        $('#FileList').prop('disabled',true)\r\n        $('#fileUpload').prop('disabled',false)\r\n        e.stopImmediatePropagation()\r\n\r\n      #Event got triggered on submit action of a form.\r\n      $('#fmLoad').on 'submit', (evt) =>           \r\n        return false;\r\n      \r\n      #Condition for checking whether \"LoadButton\" got clicked or not.\r\n      if window.currentActionId == \"LoadButton\" \r\n         if $('#rbtnDB').prop('checked')   \r\n             $('#fileUpload').val(\"\")\r\n             if $('#FileList').val() && $('#FileList').val() != \"default\"\r\n                $('#DisableBackground').show()\r\n                $('#pageLoader').show()\r\n                LoadFromDb loadFromDb = new LoadFromDb Globals.get('Canvas'),$('#FileList').val()\r\n                loadFromDb.execute()\r\n                $('#LoadFileModal').modal('hide'); \r\n                $('.modal-backdrop').hide();                \r\n                $('#fmLoad')[0].reset();\r\n             else\r\n               $('#ddlLoadValidationMessage').show()\r\n               $('#LoadValidationMessage').hide()\r\n         else if $('#rbtnFile').prop('checked')\r\n             inputFile = $('#fileUpload')[0].files[0]\r\n             if inputFile\r\n                 if inputFile.type == \"text/plain\"\r\n                     $('#FormatValidationMessage').hide()\r\n                     $('#LoadValidationMessage').hide()\r\n                     reader = new FileReader(inputFile);\r\n                     reader.readAsText(inputFile);\r\n                     $('#LoadFileModal').modal('hide'); \r\n                     $('.modal-backdrop').hide();                 \r\n                     $('#fileUpload').val(\"\")\r\n                     reader.onload = (e) =>\r\n                        LoadFromFile loadFromFile = new LoadFromFile Globals.get('Canvas'),e.target.result\r\n                        loadFromFile.execute()\r\n                        $('#fmLoad')[0].reset();\r\n                 else               \r\n                   $('#FormatValidationMessage').show()\r\n                   $('#fmLoad')[0].reset()\r\n             else\r\n               $('#ddlLoadValidationMessage').hide()\r\n               $('#LoadValidationMessage').show()\r\n"]}