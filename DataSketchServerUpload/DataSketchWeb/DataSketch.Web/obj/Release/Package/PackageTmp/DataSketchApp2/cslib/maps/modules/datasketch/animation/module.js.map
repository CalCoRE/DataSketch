{"version":3,"file":"../../../../modules/datasketch/animation/module.js","sources":["modules/datasketch/animation/module.coffee"],"names":[],"mappings":"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","sourcesContent":["define (require) ->\r\n  Module = require 'core/app/module'\r\n  HM = require 'core/event/hook_manager'\r\n  Globals = require 'core/model/globals'\r\n\r\n  VerticalPositionProperty = require './properties/y/module'\r\n  HorizontalPositionProperty = require './properties/x/module'\r\n  WidthProperty = require './properties/width/module'\r\n  HeightProperty = require './properties/height/module'\r\n  RotationProperty = require './properties/rotation/module'\r\n  ColorProperty = require './properties/color/module'\r\n  ScaleProperty = require './properties/scale/module'\r\n  TransparencyProperty = require './properties/transparency/module'\r\n  StampingProperty = require './properties/stamping/module'\r\n\r\n  Animator = require './animator'\r\n  ModeSelectTool = require 'modules/datasketch/tools/mode/tool'\r\n  ScrubBar = require './scrubbar/scrubbar'\r\n\r\n  require 'link!./style.css'\r\n\r\n  class AnimationModule extends Module\r\n    constructor: () ->\r\n      super\r\n\r\n    init: () =>\r\n      window.IsTrail = false\r\n      @_animator = new Animator\r\n        canvas: Globals.get 'Canvas'\r\n        datastore: Globals.get 'DataStore'\r\n      @_scrubbar = new ScrubBar @_animator\r\n\r\n      HM.hook 'Toolbar.Tools', @_toolbarTools\r\n\r\n    run: () =>\r\n      Globals.get('Canvas').addEventListener 'Canvas.ModeChange', @_onModeChange\r\n      Globals.get('App.view').addChild @_scrubbar\r\n\r\n    _toolbarTools: (list, meta) =>\r\n      if meta.id is \"mode\"\r\n        list.push new ModeSelectTool \"animate\"\r\n      list\r\n\r\n    _onModeChange: (evt) =>\r\n      if evt.currentTarget.getMode() == \"animate\"\r\n        Globals.get('Canvas').selectObjects []\r\n        Globals.get('Canvas')._view.selectionCleared()\r\n        console.log(1)\r\n        Globals.get('Canvas').disableControls()\r\n        @_animator._isLoop = true\r\n        @_animator.cache()\r\n        @_animator.reset()\r\n        @_animator.play()\r\n        @_scrubbar.show()\r\n      else if evt.data.last == \"animate\"\r\n        @_animator.pause()\r\n        @_animator.reset()\r\n        @_animator.restore()\r\n        @_scrubbar.hide()\r\n\r\n  AnimationModule.requires = [\r\n    HorizontalPositionProperty\r\n    VerticalPositionProperty\r\n    WidthProperty\r\n    HeightProperty\r\n    RotationProperty\r\n    ScaleProperty\r\n    ColorProperty\r\n    TransparencyProperty\r\n    StampingProperty  \r\n  ]\r\n  \r\n  AnimationModule"]}