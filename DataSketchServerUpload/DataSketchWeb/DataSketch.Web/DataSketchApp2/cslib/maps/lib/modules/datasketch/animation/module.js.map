{"version":3,"file":"../../../../../lib/modules/datasketch/animation/module.js","sources":["lib/modules/datasketch/animation/module.coffee"],"names":[],"mappings":"AAAA;AAAA,MAAA;;;;EAAA,MAAA,CAAO,SAAC,OAAD;AACL,QAAA;IAAA,MAAA,GAAS,OAAA,CAAQ,iBAAR;IACT,EAAA,GAAK,OAAA,CAAQ,yBAAR;IACL,OAAA,GAAU,OAAA,CAAQ,oBAAR;IAEV,wBAAA,GAA2B,OAAA,CAAQ,uBAAR;IAC3B,0BAAA,GAA6B,OAAA,CAAQ,uBAAR;IAC7B,aAAA,GAAgB,OAAA,CAAQ,2BAAR;IAChB,cAAA,GAAiB,OAAA,CAAQ,4BAAR;IACjB,gBAAA,GAAmB,OAAA,CAAQ,8BAAR;IACnB,aAAA,GAAgB,OAAA,CAAQ,2BAAR;IAChB,aAAA,GAAgB,OAAA,CAAQ,2BAAR;IAChB,oBAAA,GAAuB,OAAA,CAAQ,kCAAR;IAEvB,QAAA,GAAW,OAAA,CAAQ,YAAR;IACX,cAAA,GAAiB,OAAA,CAAQ,oCAAR;IACjB,QAAA,GAAW,OAAA,CAAQ,qBAAR;IAEX,OAAA,CAAQ,kBAAR;IAEM;;;MACS,yBAAA;;;;;QACX,kDAAA,SAAA;MADW;;gCAGb,IAAA,GAAM,SAAA;QACJ,IAAC,CAAA,SAAD,GAAa,IAAI,QAAJ,CACX;UAAA,MAAA,EAAQ,OAAO,CAAC,GAAR,CAAY,QAAZ,CAAR;UACA,SAAA,EAAW,OAAO,CAAC,GAAR,CAAY,WAAZ,CADX;SADW;QAGb,IAAC,CAAA,SAAD,GAAa,IAAI,QAAJ,CAAa,IAAC,CAAA,SAAd;eAEb,EAAE,CAAC,IAAH,CAAQ,eAAR,EAAyB,IAAC,CAAA,aAA1B;MANI;;gCAQN,GAAA,GAAK,SAAA;QACH,OAAO,CAAC,GAAR,CAAY,QAAZ,CAAqB,CAAC,gBAAtB,CAAuC,mBAAvC,EAA4D,IAAC,CAAA,aAA7D;eACA,OAAO,CAAC,GAAR,CAAY,UAAZ,CAAuB,CAAC,QAAxB,CAAiC,IAAC,CAAA,SAAlC;MAFG;;gCAIL,aAAA,GAAe,SAAC,IAAD,EAAO,IAAP;QACb,IAAG,IAAI,CAAC,EAAL,KAAW,MAAd;UACE,IAAI,CAAC,IAAL,CAAU,IAAI,cAAJ,CAAmB,SAAnB,CAAV,EADF;;eAEA;MAHa;;gCAKf,aAAA,GAAe,SAAC,GAAD;QACb,IAAG,GAAG,CAAC,aAAa,CAAC,OAAlB,CAAA,CAAA,KAA+B,SAAlC;UACE,OAAO,CAAC,GAAR,CAAY,QAAZ,CAAqB,CAAC,aAAtB,CAAoC,EAApC;UACA,OAAO,CAAC,GAAR,CAAY,QAAZ,CAAqB,CAAC,eAAtB,CAAA;UACA,IAAC,CAAA,SAAS,CAAC,OAAX,GAAqB;UACrB,IAAC,CAAA,SAAS,CAAC,KAAX,CAAA;UACA,IAAC,CAAA,SAAS,CAAC,KAAX,CAAA;UACA,IAAC,CAAA,SAAS,CAAC,IAAX,CAAA;iBACA,IAAC,CAAA,SAAS,CAAC,IAAX,CAAA,EAPF;SAAA,MAQK,IAAG,GAAG,CAAC,IAAI,CAAC,IAAT,KAAiB,SAApB;UACH,IAAC,CAAA,SAAS,CAAC,KAAX,CAAA;UACA,IAAC,CAAA,SAAS,CAAC,KAAX,CAAA;UACA,IAAC,CAAA,SAAS,CAAC,OAAX,CAAA;iBACA,IAAC,CAAA,SAAS,CAAC,IAAX,CAAA,EAJG;;MATQ;;;;OArBa;IAoC9B,eAAe,CAAC,QAAhB,GAA2B,CACzB,0BADyB,EAEzB,wBAFyB,EAGzB,aAHyB,EAIzB,cAJyB,EAKzB,gBALyB,EAMzB,aANyB,EAOzB,aAPyB,EAQzB,oBARyB;WAW3B;EAnEK,CAAP;AAAA","sourcesContent":["define (require) ->\n  Module = require 'core/app/module'\n  HM = require 'core/event/hook_manager'\n  Globals = require 'core/model/globals'\n\n  VerticalPositionProperty = require './properties/y/module'\n  HorizontalPositionProperty = require './properties/x/module'\n  WidthProperty = require './properties/width/module'\n  HeightProperty = require './properties/height/module'\n  RotationProperty = require './properties/rotation/module'\n  ColorProperty = require './properties/color/module'\n  ScaleProperty = require './properties/scale/module'\n  TransparencyProperty = require './properties/transparency/module'\n\n  Animator = require './animator'\n  ModeSelectTool = require 'modules/datasketch/tools/mode/tool'\n  ScrubBar = require './scrubbar/scrubbar'\n\n  require 'link!./style.css'\n\n  class AnimationModule extends Module\n    constructor: () ->\n      super\n\n    init: () =>\n      @_animator = new Animator\n        canvas: Globals.get 'Canvas'\n        datastore: Globals.get 'DataStore'\n      @_scrubbar = new ScrubBar @_animator\n\n      HM.hook 'Toolbar.Tools', @_toolbarTools\n\n    run: () =>\n      Globals.get('Canvas').addEventListener 'Canvas.ModeChange', @_onModeChange\n      Globals.get('App.view').addChild @_scrubbar\n\n    _toolbarTools: (list, meta) =>\n      if meta.id is \"mode\"\n        list.push new ModeSelectTool \"animate\"\n      list\n\n    _onModeChange: (evt) =>\n      if evt.currentTarget.getMode() == \"animate\"\n        Globals.get('Canvas').selectObjects []\n        Globals.get('Canvas').disableControls()\n        @_animator._isLoop = true\n        @_animator.cache()\n        @_animator.reset()\n        @_animator.play()\n        @_scrubbar.show()\n      else if evt.data.last == \"animate\"\n        @_animator.pause()\n        @_animator.reset()\n        @_animator.restore()\n        @_scrubbar.hide()\n\n  AnimationModule.requires = [\n    HorizontalPositionProperty\n    VerticalPositionProperty\n    WidthProperty\n    HeightProperty\n    RotationProperty\n    ScaleProperty\n    ColorProperty\n    TransparencyProperty\n  ]\n\n  AnimationModule"]}